{"remainingRequest":"D:\\1\\egg-lottery-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\1\\egg-lottery-master\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\1\\egg-lottery-master\\src\\App.vue","mtime":1670432523120},{"path":"D:\\1\\egg-lottery-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670231408046},{"path":"D:\\1\\egg-lottery-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1670231408036},{"path":"D:\\1\\egg-lottery-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670231408046},{"path":"D:\\1\\egg-lottery-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1670231437653}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7DQogIFBSSVpFU19MSVNULA0KICBMT1RURVJZX1RJTUVTDQp9IGZyb20gIi4vYXBpL2luaXREYXRhIjsNCmltcG9ydCBTdG9yYWdlIGZyb20gIi4vc3RvcmFnZS9pbmRleCI7DQppbXBvcnQgSGVscGVyIGZyb20gIi4vdXRpbC9oZWxwZXIiOw0KaW1wb3J0IERyYXdCYWxsIGZyb20gIi4vY29tcG9uZW50cy9EcmF3QmFsbCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFwcCIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBEcmF3QmFsbCwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcHJvY2Vzc2luZzogZmFsc2UsIC8vIOaYr+WQpuato+WcqOaKveWlluS4rQ0KICAgICAgc2hvd0RyYXdCYWxsOiBmYWxzZSwgLy8g5byA5aWWIOaYr+WQpuaYvuekug0KICAgICAgc2hvd1ByaXplQm94OiBmYWxzZSwgLy8g5Ye65aWWIOaYr+WQpuaYvuekug0KICAgICAgc2hvd2JhbGxzOiB0cnVlLA0KICAgICAgdG90YWxUaW1lczogMCwgLy8g5oC76I635b6X55qE5oq95aWW5qyh5pWwDQogICAgICB1c2VkVGltZXM6IDAsIC8vIOW3suS9v+eUqOeahOaKveWlluasoeaVsA0KICAgICAgYXdhcmREYXRhOiB7fSwgLy8g5Lit5aWW5aWW5ZOB6K+m5oOFDQogICAgICBhd2FyZExpc3Q6IFtdLCAvLyDlpZblk4HliJfooagNCiAgICAgIHByaXplX2xpc3Q6IFBSSVpFU19MSVNULA0KICAgICAgY2VudGJhbGw6IGZhbHNlLA0KICAgICAgc2hvd2JveGJhbGw6IGZhbHNlLA0KICAgICAgc2hvd19teXByaXplOiBmYWxzZSwNCiAgICAgIHNob3diYWxsMTogdHJ1ZSwNCiAgICAgIHNob3diYWxsMjogdHJ1ZSwNCiAgICAgIHNob3diYWxsMzogdHJ1ZSwNCiAgICAgIHNob3diYWxsNDogdHJ1ZSwNCiAgICAgIHNob3diYWxsNTogdHJ1ZSwNCiAgICAgIHNob3diYWxsNjogdHJ1ZSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8vIOWJqeS9meaKveWlluasoeaVsA0KICAgIHVzYWJsZVRpbWVzKCkgew0KICAgICAgcmV0dXJuIHRoaXMudG90YWxUaW1lcyAtIHRoaXMudXNlZFRpbWVzOw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgbGV0IHsgYXdhcmRMaXN0IH0gPSBTdG9yYWdlLmdldFN0b3JhZ2UoKTsNCiAgICB0aGlzLnRvdGFsVGltZXMgPSBMT1RURVJZX1RJTUVTOw0KICAgIFN0b3JhZ2Uuc2V0SXRlbSgidG90YWxUaW1lcyIsIHRoaXMudG90YWxUaW1lcyk7DQogICAgU3RvcmFnZS5zZXRJdGVtKCJ1c2VkVGltZXMiLCAwKTsNCg0KICAgIHRoaXMudG90YWxUaW1lcyA9IFN0b3JhZ2UuZ2V0SXRlbSgidG90YWxUaW1lcyIpOw0KICAgIHRoaXMudXNlZFRpbWVzID0gU3RvcmFnZS5nZXRJdGVtKCJ1c2VkVGltZXMiKTsNCg0KICAgIC8vIOacrOWcsOiOt+WPluS4reWlluaVsOaNrg0KICAgIGlmIChhd2FyZExpc3QgIT09IHVuZGVmaW5lZCkgew0KICAgICAgdGhpcy5hd2FyZExpc3QgPSBhd2FyZExpc3Q7DQogICAgfQ0KICB9LA0KICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7DQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsICgpID0+IHsNCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsb3R0ZXJ5Jyk7DQogICAgfSk7DQogIH0sDQogIG1ldGhvZHM6IHsNCg0KICAgIF9sb3R0ZXJ5KCkgew0KICAgICAgbGV0IGxlbmd0aCA9IFBSSVpFU19MSVNULmxlbmd0aDsNCiAgICAgIGxldCBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGVuZ3RoKTsNCiAgICAgIGlmIChQUklaRVNfTElTVC5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMuX3N0b3JpbmdEYXRhKA0KICAgICAgICAgIE9iamVjdC5hc3NpZ24oUFJJWkVTX0xJU1RbaV0pDQogICAgICAgICk7DQogICAgICAgIHRoaXMuYXdhcmRMaXN0ID0gU3RvcmFnZS5nZXRJdGVtKCJhd2FyZExpc3QiKTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWxlcnQoJ+mZhOmtlOaJreibi+W3suaKveWujCcpDQogICAgICB9DQoNCiAgICAgIGxldCBwcml6ZV9saXN0cyA9IFBSSVpFU19MSVNULnNwbGljZShpLCAxKTsNCiAgICAgIA0KICAgICAgaWYgKHByaXplX2xpc3RzWzBdLmlkID09IDEpIHsNCiAgICAgICAgdGhpcy5zaG93YmFsbDEgPSBmYWxzZTsNCiAgICAgIH0gZWxzZSBpZiAocHJpemVfbGlzdHNbMF0uaWQgPT0gMikgew0KICAgICAgICB0aGlzLnNob3diYWxsMiA9IGZhbHNlOw0KICAgICAgfSBlbHNlIGlmIChwcml6ZV9saXN0c1swXS5pZCA9PSAzKSB7DQogICAgICAgIHRoaXMuc2hvd2JhbGwzID0gZmFsc2U7DQogICAgICB9IGVsc2UgaWYgKHByaXplX2xpc3RzWzBdLmlkID09IDQpIHsNCiAgICAgICAgdGhpcy5zaG93YmFsbDQgPSBmYWxzZTsNCiAgICAgIH0gZWxzZSBpZiAocHJpemVfbGlzdHNbMF0uaWQgPT0gNSkgew0KICAgICAgICB0aGlzLnNob3diYWxsNSA9IGZhbHNlOw0KICAgICAgfSBlbHNlIGlmIChwcml6ZV9saXN0c1swXS5pZCA9PSA2KSB7DQogICAgICAgIHRoaXMuc2hvd2JhbGw2ID0gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIHJldHVybiBwcml6ZV9saXN0c1swXTsNCg0KICAgIH0sDQogICAgX3N0b3JpbmdEYXRhKGRhdGEpIHsNCiAgICAgIGxldCBhd2FyZExpc3QgPSBTdG9yYWdlLmdldEl0ZW0oImF3YXJkTGlzdCIpOw0KICAgICAgaWYgKGF3YXJkTGlzdCA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgIFN0b3JhZ2Uuc2V0SXRlbSgiYXdhcmRMaXN0IiwgW2RhdGFdKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIFN0b3JhZ2Uuc2V0SXRlbSgiYXdhcmRMaXN0IiwgWy4uLmF3YXJkTGlzdCwgZGF0YV0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgbG90dGVyeUhhbmRsZXIoKSB7DQogICAgICB0aGlzLmNlbnRiYWxsID0gdHJ1ZTsNCiAgICAgIHRoaXMucHJvY2Vzc2luZyA9IHRydWU7IC8vIOaKveWlluS4rQ0KICAgICAgdGhpcy51c2VkVGltZXMgKz0gMjA7DQogICAgICBTdG9yYWdlLnNldEl0ZW0oInVzZWRUaW1lcyIsIHRoaXMudXNlZFRpbWVzKTsNCg0KICAgICAgdGhpcy5zaG93UHJpemVCb3ggPSBmYWxzZTsNCiAgICAgIHRoaXMuc2hvd2JveGJhbGwgPSB0cnVlOw0KICAgICAgdGhpcy4kcmVmcy5iYWxscy5zdHlsZS5hbmltYXRpb25OYW1lID0gIiI7DQogICAgICB0aGlzLiRyZWZzLmJhbGxzLnN0eWxlLmFuaW1hdGlvbk5hbWUgPSAiYmFsbHNSb2xsaW5nIjsNCg0KICAgICAgYXdhaXQgSGVscGVyLndhaXQoMTAwMCk7DQogICAgICB0aGlzLnNob3dQcml6ZUJveCA9IHRydWU7DQogICAgICBhd2FpdCBIZWxwZXIud2FpdCg4MDApOw0KICAgICAgdGhpcy5zaG93UHJpemVCb3ggPSBmYWxzZTsNCiAgICAgIHRoaXMuc2hvd2JveGJhbGwgPSBmYWxzZTsNCiAgICAgdGhpcy5zaG93RHJhd0JhbGwgPSB0cnVlOw0KICAgICAgdGhpcy5jZW50YmFsbCA9IGZhbHNlOw0KICAgICAgdGhpcy5hd2FyZERhdGEgPSB0aGlzLl9sb3R0ZXJ5KCk7DQogICAgICB0aGlzLiRyZWZzLmJhbGxzLnN0eWxlLmFuaW1hdGlvbk5hbWUgPSAiIg0KICAgIH0sDQogICAgaGlkZURyYXdCYWxsSGFuZGxlcigpIHsNCiAgICAgIHRoaXMucHJvY2Vzc2luZyA9IGZhbHNlOw0KICAgICAgdGhpcy5zaG93RHJhd0JhbGwgPSBmYWxzZTsNCiAgICB9LA0KICAgIHNob3dfbXlwcml6ZWhhbmRsZXIoKSB7DQogICAgICB0aGlzLnNob3dfbXlwcml6ZSA9IHRydWU7DQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- 转盘 -->\r\n    <div class=\"content\">\r\n      <div class=\"starleft\"></div>\r\n      <div class=\"starright\"></div>\r\n      <div class=\"title1\"></div>\r\n      <div class=\"machine-botton\"></div>\r\n      <div class=\"box-ballupDown\" v-show=\"showboxball\">\r\n        <div class=\"box-ball1\"></div>\r\n        <div class=\"box-ball2\"></div>\r\n        <div class=\"box-ball3\"></div>\r\n        <div class=\"box-ball4\"></div>\r\n        <div class=\"box-ball5\"></div>\r\n        <div class=\"box-ball6\"></div>\r\n      </div>\r\n      <div class=\"machine\"></div>\r\n      <div ref=\"balls\" v-show=\"showballs\" class=\"balls\">\r\n        <div v-show=\"showball1\" :class=\"'ball1 ' + (centball ? 'centball' : 'divergeball')\">\r\n          <div class=\"pop1\"></div>\r\n        </div>\r\n        <div v-show=\"showball2\" :class=\"'ball2 ' + (centball ? 'centball' : 'divergeball')\">\r\n          <div class=\"pop2\"></div>\r\n        </div>\r\n        <div v-show=\"showball3\" :class=\"'ball3 ' + (centball ? 'centball' : 'divergeball')\">\r\n          <div class=\"pop3\"></div>\r\n        </div>\r\n        <div v-show=\"showball4\" :class=\"'ball4 ' + (centball ? 'centball' : 'divergeball')\">\r\n          <div class=\"pop3\"></div>\r\n        </div>\r\n        <div v-show=\"showball5\" :class=\"'ball5 ' + (centball ? 'centball' : 'divergeball')\">\r\n          <div class=\"pop4\"></div>\r\n        </div>\r\n        <div v-show=\"showball6\" :class=\"'ball6 ' + (centball ? 'centball' : 'divergeball')\">\r\n          <div class=\"pop4\"></div>\r\n        </div>\r\n      </div>\r\n      <button @click=\"lotteryHandler\" class=\"btn-lottery\" :disabled=\"usableTimes < 1\">开始抽奖\r\n      </button>\r\n      <button class=\"btn-left\"></button>\r\n      <button class=\"btn-right\"></button>\r\n      <div class=\"coin\">×20</div>\r\n      <div class=\"tipbg\">左右按钮或滑动切换奖池</div>\r\n      <div class=\"detialbg\"></div>\r\n      <button class=\"btn-win\" @click=\"show_myprizehandler\">\r\n        累计奖励\r\n      </button>\r\n      <div class=\"cj-timesbg\">\r\n        剩余XX数量\r\n        <div class=\"cj-times\">\r\n          <i class=\"i\">{{ usableTimes }}</i>\r\n        </div>\r\n      </div>\r\n      <div class=\"ball-exit\">\r\n      </div>\r\n      <!-- 扭蛋下落 -->\r\n      <div class=\"bounce-down-ball\" v-show=\"showPrizeBox\"></div>\r\n    </div>\r\n    <!-- 我的奖品 -->\r\n    <div class=\"my-prize\" v-show=\"show_myprize\">\r\n      <div class=\"top\">累计奖品</div>\r\n      <ul class=\"list\">\r\n        <li v-for=\"item in awardList\" :key=\"item.timestamp\">\r\n          <!-- <span>{{ item.time }}</span> -->\r\n          <span>恭喜获得</span>\r\n          <span>{{ item.name }}</span>\r\n        </li>\r\n      </ul>\r\n      <div class=\"no-awards\" v-if=\"awardList.length === 0\">暂无奖品</div>\r\n    </div>\r\n\r\n    <draw-ball @hideDrawBall=\"hideDrawBallHandler\" :awardData=\"awardData\" v-if=\"(showDrawBall)\"></draw-ball>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n  PRIZES_LIST,\r\n  LOTTERY_TIMES\r\n} from \"./api/initData\";\r\nimport Storage from \"./storage/index\";\r\nimport Helper from \"./util/helper\";\r\nimport DrawBall from \"./components/DrawBall\";\r\n\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n    DrawBall,\r\n  },\r\n  data() {\r\n    return {\r\n      processing: false, // 是否正在抽奖中\r\n      showDrawBall: false, // 开奖 是否显示\r\n      showPrizeBox: false, // 出奖 是否显示\r\n      showballs: true,\r\n      totalTimes: 0, // 总获得的抽奖次数\r\n      usedTimes: 0, // 已使用的抽奖次数\r\n      awardData: {}, // 中奖奖品详情\r\n      awardList: [], // 奖品列表\r\n      prize_list: PRIZES_LIST,\r\n      centball: false,\r\n      showboxball: false,\r\n      show_myprize: false,\r\n      showball1: true,\r\n      showball2: true,\r\n      showball3: true,\r\n      showball4: true,\r\n      showball5: true,\r\n      showball6: true,\r\n    };\r\n  },\r\n  computed: {\r\n    // 剩余抽奖次数\r\n    usableTimes() {\r\n      return this.totalTimes - this.usedTimes;\r\n    },\r\n  },\r\n  created() {\r\n    let { awardList } = Storage.getStorage();\r\n    this.totalTimes = LOTTERY_TIMES;\r\n    Storage.setItem(\"totalTimes\", this.totalTimes);\r\n    Storage.setItem(\"usedTimes\", 0);\r\n\r\n    this.totalTimes = Storage.getItem(\"totalTimes\");\r\n    this.usedTimes = Storage.getItem(\"usedTimes\");\r\n\r\n    // 本地获取中奖数据\r\n    if (awardList !== undefined) {\r\n      this.awardList = awardList;\r\n    }\r\n  },\r\n  mounted: function () {\r\n    window.addEventListener('beforeunload', () => {\r\n      localStorage.removeItem('lottery');\r\n    });\r\n  },\r\n  methods: {\r\n\r\n    _lottery() {\r\n      let length = PRIZES_LIST.length;\r\n      let i = Math.floor(Math.random() * length);\r\n      if (PRIZES_LIST.length > 0) {\r\n        this._storingData(\r\n          Object.assign(PRIZES_LIST[i])\r\n        );\r\n        this.awardList = Storage.getItem(\"awardList\");\r\n\r\n      } else {\r\n        alert('附魔扭蛋已抽完')\r\n      }\r\n\r\n      let prize_lists = PRIZES_LIST.splice(i, 1);\r\n      \r\n      if (prize_lists[0].id == 1) {\r\n        this.showball1 = false;\r\n      } else if (prize_lists[0].id == 2) {\r\n        this.showball2 = false;\r\n      } else if (prize_lists[0].id == 3) {\r\n        this.showball3 = false;\r\n      } else if (prize_lists[0].id == 4) {\r\n        this.showball4 = false;\r\n      } else if (prize_lists[0].id == 5) {\r\n        this.showball5 = false;\r\n      } else if (prize_lists[0].id == 6) {\r\n        this.showball6 = false;\r\n      }\r\n\r\n      return prize_lists[0];\r\n\r\n    },\r\n    _storingData(data) {\r\n      let awardList = Storage.getItem(\"awardList\");\r\n      if (awardList === undefined) {\r\n        Storage.setItem(\"awardList\", [data]);\r\n      } else {\r\n        Storage.setItem(\"awardList\", [...awardList, data]);\r\n      }\r\n    },\r\n    async lotteryHandler() {\r\n      this.centball = true;\r\n      this.processing = true; // 抽奖中\r\n      this.usedTimes += 20;\r\n      Storage.setItem(\"usedTimes\", this.usedTimes);\r\n\r\n      this.showPrizeBox = false;\r\n      this.showboxball = true;\r\n      this.$refs.balls.style.animationName = \"\";\r\n      this.$refs.balls.style.animationName = \"ballsRolling\";\r\n\r\n      await Helper.wait(1000);\r\n      this.showPrizeBox = true;\r\n      await Helper.wait(800);\r\n      this.showPrizeBox = false;\r\n      this.showboxball = false;\r\n     this.showDrawBall = true;\r\n      this.centball = false;\r\n      this.awardData = this._lottery();\r\n      this.$refs.balls.style.animationName = \"\"\r\n    },\r\n    hideDrawBallHandler() {\r\n      this.processing = false;\r\n      this.showDrawBall = false;\r\n    },\r\n    show_myprizehandler() {\r\n      this.show_myprize = true;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style src=\"./App.scss\" lang=\"scss\">\r\n\r\n</style>\r\n"]}]}